"use strict";const searchInput=document.querySelector(".js-search__input"),cocktailCardList=document.querySelector(".js-cocktail__list");let favoriteDataList=document.querySelector(".js-favorite__list");const searchButton=document.querySelector(".js-search__button"),resetButton=document.querySelector(".js-reset__button");let cocktailData=[],favorites=[];function getLocalStorage(){const t=localStorage.getItem("favorites");if(null===t)favoriteDataList.innerHTML="";else{const e=JSON.parse(t);favorites=e,console.log("paso por get local storage"),renderFavoritesLocal()}}function renderFavoritesLocal(){let t="";favoriteDataList.innerHTML="";for(const e of favorites){t="card__favorite";const a=document.createElement("li");a.classList.add("js-cocktail__card"),a.classList.add(t),a.classList.add("card"),a.classList.add("card--fav"),a.setAttribute("id",e.id),favoriteDataList.appendChild(a);const i=document.createElement("img");i.classList.add("card__img"),i.classList.add("card__img--fav"),i.src=e.image,i.alt=e.name,a.appendChild(i);const c=document.createElement("h2");c.classList.add("card__title"),c.classList.add("card__title--fav");const o=document.createTextNode(e.name);c.appendChild(o),a.appendChild(c);const s=document.createElement("a");s.setAttribute("id",e.id),s.classList.add("card__favorite--dislbtn"),s.classList.add("js-dislike-button"),a.appendChild(s);const r=document.createElement("img");r.classList.add("card__favorite--dislimg"),s.appendChild(r),r.src="./assets/images/heart-circle-minus-solid.svg"}listenDislikeButton()}function handleSearchButton(t){t.preventDefault(),getFromApi()}function getFromApi(){const t=searchInput.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(t=>t.json()).then(t=>{cocktailData=t.drinks.map(t=>({id:t.idDrink,name:t.strDrink,image:t.strDrinkThumb})),emptyAvatar(cocktailData)}).catch(t=>console.log("Ha sucedido un error: "+t))}function emptyAvatar(t){console.log("paso por emty av");for(const e of t)null===e.image?(e.image="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgdRaq2P7x32D8eIIf-LoP0nehibaasT5SRQ&usqp=CAU",renderFilteredList(t)):renderFilteredList(t)}function isFavorite(t){return void 0!==favorites.find(e=>e.id===t.id)}function renderFilteredList(t){let e="",a="";for(const i of t){if(isFavorite(i)){a="card__favorite";e+=`<li class="js-cocktail__card ${a} card" id="${i.id}"><img class="card__img" src=${i.image} alt=""><h2 class="card__title card__title--fav">${i.name}</h2></li>`}else a="",e+=`<li class="js-cocktail__card ${a} card" id="${i.id}"><img class="card__img" src=${i.image} alt=""><h2 class="card__title">${i.name}</h2></li>`}cocktailCardList.innerHTML=e,getLocalStorage(),listenCardClick(),listenDislikeButton()}function handleCardClick(t){console.log("estoy en handleCardClick");const e=t.currentTarget.id,a=cocktailData.find(t=>t.id===e),i=favorites.findIndex(t=>t.id===e);-1===i?(console.log("renderizo desde handlecardCLick"),favorites.push(a)):favorites.splice(i,1),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal()}function setFavInLocalStorage(){for(const t of cocktailData)if(null!==t){const t=JSON.stringify(favorites);localStorage.setItem("favorites",t)}}function handleDislikeClick(t){const e=t.currentTarget.id,a=cocktailData.find(t=>t.id===e),i=favorites.findIndex(t=>t.id===e);-1===i?(favorites.push(a),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal()):(favorites.splice(i,1),console.log("dislike--para borrar"),console.log(favorites),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal())}function listenCardClick(){const t=document.querySelectorAll(".js-cocktail__card");for(const e of t)e.addEventListener("click",handleCardClick)}function listenDislikeButton(){console.log("escuchando al bot√≥n dislike");const t=document.querySelectorAll(".js-dislike-button");for(const e of t)e.addEventListener("click",handleDislikeClick)}function handleResetButton(t){t.preventDefault(),cocktailCardList.innerHTML="",searchInput.value="",favorites=[],setFavInLocalStorage(),renderFavoritesLocal()}searchButton.addEventListener("click",handleSearchButton),resetButton.addEventListener("click",handleResetButton),getLocalStorage();