"use strict";const searchInput=document.querySelector(".js-search__input"),cocktailCardList=document.querySelector(".js-cocktail__list");let favoriteDataList=document.querySelector(".js-favorite__list");const searchButton=document.querySelector(".js-search__button"),resetButton=document.querySelector(".js-reset__button");let cocktailData=[],favorites=[];function getLocalStorage(){const t=localStorage.getItem("favorites");if(null===t)favoriteDataList.innerHTML="";else{const e=JSON.parse(t);favorites=e,renderFavoritesLocal()}}function renderFavoritesLocal(){let t="";favoriteDataList.innerHTML="";for(const e of favorites){t="card__favorite";const a=document.createElement("li");a.classList.add("js-cocktail__card"),a.classList.add(t),a.classList.add("card"),a.classList.add("card--fav"),a.setAttribute("id",e.id),favoriteDataList.appendChild(a);const i=document.createElement("img");i.classList.add("card__img"),i.classList.add("card__img--fav"),i.src=e.image,i.alt=e.name,a.appendChild(i);const c=document.createElement("h2");c.classList.add("card__title"),c.classList.add("card__title--fav");const s=document.createTextNode(e.name);c.appendChild(s),a.appendChild(c);const n=document.createElement("a");n.setAttribute("id",e.id),n.classList.add("card__favorite--dislbtn"),n.classList.add("js-dislike-button"),a.appendChild(n);const d=document.createElement("img");d.classList.add("card__favorite--dislimg"),n.appendChild(d),d.src="./assets/images/heart-circle-minus-solid.svg"}listenDislikeButton()}function handleSearchButton(t){t.preventDefault(),getFromApi()}function getFromApi(){const t=searchInput.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(t=>t.json()).then(t=>{cocktailData=t.drinks.map(t=>({id:t.idDrink,name:t.strDrink,image:t.strDrinkThumb})),emptyAvatar(cocktailData)})}function emptyAvatar(t){for(const e of t)null===e.image&&(e.image="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSgdRaq2P7x32D8eIIf-LoP0nehibaasT5SRQ&usqp=CAU");renderFilteredList(t)}function isFavorite(t){return void 0!==favorites.find(e=>e.id===t.id)}function renderFilteredList(t){let e="";cocktailCardList.innerHTML="";for(const a of t){if(isFavorite(a)){e="card__favorite";const t=document.createElement("li");t.classList.add("js-cocktail__card"),t.classList.add(e),t.classList.add("card"),t.setAttribute("id",a.id),cocktailCardList.appendChild(t);const i=document.createElement("img");i.classList.add("card__img"),i.src=a.image,i.alt=a.name,t.appendChild(i);const c=document.createElement("h2");c.classList.add("card__title"),c.classList.add("card__title--fav");const s=document.createTextNode(a.name);c.appendChild(s),t.appendChild(c)}else{const t=document.createElement("li");t.classList.add("js-cocktail__card"),t.classList.add("card"),t.setAttribute("id",a.id),cocktailCardList.appendChild(t);const e=document.createElement("img");e.classList.add("card__img"),e.src=a.image,e.alt=a.name,t.appendChild(e);const i=document.createElement("h2");i.classList.add("card__title"),i.classList.add("card__title--fav");const c=document.createTextNode(a.name);i.appendChild(c),t.appendChild(i)}}getLocalStorage(),listenCardClick(),listenDislikeButton()}function handleCardClick(t){const e=t.currentTarget.id,a=cocktailData.find(t=>t.id===e),i=favorites.findIndex(t=>t.id===e);-1===i?favorites.push(a):favorites.splice(i,1),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal()}function setFavInLocalStorage(){const t=JSON.stringify(favorites);localStorage.setItem("favorites",t)}function handleDislikeClick(t){const e=t.currentTarget.id,a=cocktailData.find(t=>t.id===e),i=favorites.findIndex(t=>t.id===e);-1===i?(favorites.push(a),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal()):(favorites.splice(i,1),setFavInLocalStorage(),renderFilteredList(cocktailData),renderFavoritesLocal())}function listenCardClick(){const t=document.querySelectorAll(".js-cocktail__card");for(const e of t)e.addEventListener("click",handleCardClick)}function listenDislikeButton(){const t=document.querySelectorAll(".js-dislike-button");for(const e of t)e.addEventListener("click",handleDislikeClick)}function handleResetButton(t){t.preventDefault(),cocktailCardList.innerHTML="",searchInput.value="",favorites=[],setFavInLocalStorage(),renderFavoritesLocal()}searchButton.addEventListener("click",handleSearchButton),resetButton.addEventListener("click",handleResetButton),getLocalStorage();